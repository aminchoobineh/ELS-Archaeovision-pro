import{j as e}from"./query-vendor-Csb3ZsXT.js";import{a as H,r as l,g as Q,R as F,u as $,B as X,b as Z,d as ee}from"./react-vendor-IAstmV3F.js";import{m as I}from"./map-vendor-CmoVXkER.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();var _={},P=H;_.createRoot=P.createRoot,_.hydrateRoot=P.hydrateRoot;const te=({onClose:t})=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-5 border border-amber-200 max-w-2xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"ðŸº"}),e.jsx("h2",{className:"text-lg font-bold text-amber-900",children:"Ø¯Ø±Ø¨Ø§Ø±Ù‡ ArchaeoVision Pro"})]}),t&&e.jsx("button",{onClick:t,className:"text-stone-400 hover:text-stone-600",children:"âœ•"})]}),e.jsxs("p",{className:"text-sm text-stone-700 mb-4",children:[e.jsx("span",{className:"font-bold text-amber-800",children:"ArchaeoVision Pro"})," ÛŒÚ© Ø³Ø§Ù…Ø§Ù†Ù‡ ØªØ®ØµØµÛŒ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù…Ø­ÙˆØ·Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø³ØªØ§Ù†ÛŒ Ø§Ø³Øª Ú©Ù‡ Ø¨Ø§ Ù‡Ù…Ú©Ø§Ø±ÛŒ ØªÛŒÙ…ÛŒ Ø§Ø² Ù…ØªØ®ØµØµÛŒÙ† Ø¨Ø§Ø³ØªØ§Ù†â€ŒØ´Ù†Ø§Ø³ÛŒØŒ Ø²Ù…ÛŒÙ†â€ŒØ´Ù†Ø§Ø³ÛŒ Ùˆ Ø³Ù†Ø¬Ø´ Ø§Ø² Ø¯ÙˆØ± ØªÙˆØ³Ø¹Ù‡ ÛŒØ§ÙØªÙ‡ Ø§Ø³Øª."]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[e.jsxs("div",{className:"bg-amber-50 p-2 rounded text-center",children:[e.jsx("span",{className:"text-lg block",children:"âš¡"}),e.jsx("span",{className:"text-xs font-bold text-amber-900",children:"Û¹Û°Ùª Ø³Ø±ÛŒØ¹â€ŒØªØ±"})]}),e.jsxs("div",{className:"bg-amber-50 p-2 rounded text-center",children:[e.jsx("span",{className:"text-lg block",children:"ðŸ’°"}),e.jsx("span",{className:"text-xs font-bold text-amber-900",children:"Ú©Ø§Ù‡Ø´ Ù‡Ø²ÛŒÙ†Ù‡"})]}),e.jsxs("div",{className:"bg-amber-50 p-2 rounded text-center",children:[e.jsx("span",{className:"text-lg block",children:"ðŸŽ¯"}),e.jsx("span",{className:"text-xs font-bold text-amber-900",children:"Ø¯Ù‚Øª ØªØ§ Û¸ÛµÙª"})]}),e.jsxs("div",{className:"bg-amber-50 p-2 rounded text-center",children:[e.jsx("span",{className:"text-lg block",children:"ðŸ“Š"}),e.jsx("span",{className:"text-xs font-bold text-amber-900",children:"Ú¯Ø²Ø§Ø±Ø´ Ø¹Ù„Ù…ÛŒ"})]})]}),e.jsxs("div",{className:"bg-stone-50 p-3 rounded-lg mb-4",children:[e.jsx("p",{className:"text-xs font-bold text-amber-800 mb-2",children:"ðŸ›°ï¸ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø§Ù‡ÙˆØ§Ø±Ù‡â€ŒØ§ÛŒ:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-amber-600",children:"â€¢"}),e.jsx("span",{children:"Sentinel-1 (Ø±Ø§Ø¯Ø§Ø±ÛŒ)"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-amber-600",children:"â€¢"}),e.jsx("span",{children:"Sentinel-2 (Ø·ÛŒÙÛŒ)"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-amber-600",children:"â€¢"}),e.jsx("span",{children:"Landsat-9 (Ø­Ø±Ø§Ø±ØªÛŒ)"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-amber-600",children:"â€¢"}),e.jsx("span",{children:"ALOS (Ø§Ø±ØªÙØ§Ø¹ÛŒ)"})]})]})]}),e.jsx("div",{className:"bg-red-50 border-r-4 border-red-600 p-3 rounded-lg text-xs mb-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-red-600 text-base",children:"âš ï¸"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-red-800 mb-1",children:"Ø³Ù„Ø¨ Ù…Ø³Ø¦ÙˆÙ„ÛŒØª Ù‚Ø§Ù†ÙˆÙ†ÛŒ Ù…Ù‡Ù…:"}),e.jsxs("p",{className:"text-red-700 leading-relaxed",children:["Ø§ÛŒÙ† Ù†Ø±Ù…â€ŒØ§ÙØ²Ø§Ø± ",e.jsx("span",{className:"font-bold",children:"ØµØ±ÙØ§Ù‹ ÛŒÚ© Ø§Ø¨Ø²Ø§Ø± ØªØ­Ù‚ÛŒÙ‚Ø§ØªÛŒ"})," Ø§Ø³Øª Ùˆ Ù†ØªØ§ÛŒØ¬ Ø¢Ù† Ø¨Ø± Ø§Ø³Ø§Ø³ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø§Ù‡ÙˆØ§Ø±Ù‡â€ŒØ§ÛŒ (Ø¨Ø§ Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ù¾ÙˆØ´Ø´ Ø§Ø¨Ø±ØŒ Ø±Ø·ÙˆØ¨Øª Ùˆ Ù¾ÙˆØ´Ø´ Ú¯ÛŒØ§Ù‡ÛŒ) Ùˆ Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ø¢Ù…Ø§Ø±ÛŒ ØªÙˆÙ„ÛŒØ¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯.",e.jsx("span",{className:"font-bold",children:" Ù‡ÛŒÚ†â€ŒÚ¯ÙˆÙ†Ù‡ Ù‚Ø·Ø¹ÛŒØª Û±Û°Û°Ùª ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯."})]}),e.jsx("p",{className:"text-red-700 mt-2 font-bold",children:"Ù‡Ø±Ú¯ÙˆÙ†Ù‡ Ø­ÙØ§Ø±ÛŒ ÛŒØ§ Ú©Ø§ÙˆØ´ Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ Ù…Ø¬ÙˆØ² Ø±Ø³Ù…ÛŒ Ø§Ø² Ù¾Ú˜ÙˆÙ‡Ø´Ú¯Ø§Ù‡ Ù…ÛŒØ±Ø§Ø« ÙØ±Ù‡Ù†Ú¯ÛŒ Ø§Ø³Øª. Ø­ÙØ§Ø±ÛŒ ØºÛŒØ±Ù…Ø¬Ø§Ø² Ø¬Ø±Ù… Ú©ÛŒÙØ±ÛŒ Ø¨ÙˆØ¯Ù‡ Ùˆ Ù…Ø¬Ø§Ø²Ø§Øª Ø­Ø¨Ø³ Ø¯Ø§Ø±Ø¯."}),e.jsx("p",{className:"text-red-700 mt-2",children:"ØªÛŒÙ… ArchaeoVision Ù‡ÛŒÚ† Ù…Ø³Ø¦ÙˆÙ„ÛŒØªÛŒ Ø¯Ø± Ù‚Ø¨Ø§Ù„ Ø§Ù‚Ø¯Ø§Ù…Ø§Øª ØºÛŒØ±Ù‚Ø§Ù†ÙˆÙ†ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ù†Ø¯Ø§Ø±Ø¯."})]})]})}),e.jsxs("div",{className:"flex items-center justify-between bg-blue-50 p-3 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-blue-600",children:"ðŸ“±"}),e.jsx("span",{className:"text-xs font-bold text-blue-800",children:"Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ:"})]}),e.jsx("div",{className:"bg-white px-3 py-1 rounded border border-blue-300",children:e.jsx("span",{className:"text-xs font-mono text-blue-800",children:"@archaeovision_support"})})]}),e.jsx("div",{className:"mt-3 text-[10px] text-stone-400 text-center",children:"Ù†Ø³Ø®Ù‡ Û³.Û° | Ø¨Ù‡Ù…Ù† Û±Û´Û°Û´"})]}),se=({onLoad:t})=>{const s=l.useRef(null),n=l.useRef(null),[r,a]=l.useState("osm"),o=()=>{if(!n.current)return;const i=r==="osm"?"satellite":"osm";a(i),i==="osm"?(n.current.setLayoutProperty("osm","visibility","visible"),n.current.setLayoutProperty("satellite","visibility","none")):(n.current.setLayoutProperty("osm","visibility","none"),n.current.setLayoutProperty("satellite","visibility","visible"))};return l.useEffect(()=>{if(!(!s.current||n.current))return n.current=new I.Map({container:s.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"Â© OpenStreetMap"},satellite:{type:"raster",tiles:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"],tileSize:256,attribution:"Â© Esri"}},layers:[{id:"osm",type:"raster",source:"osm",layout:{visibility:"visible"}},{id:"satellite",type:"raster",source:"satellite",layout:{visibility:"none"}}]},center:[51.389,35.6892],zoom:6}),n.current.addControl(new I.NavigationControl,"top-right"),n.current.on("load",()=>t?.(n.current)),()=>n.current?.remove()},[t]),e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:s,className:"w-full h-full"}),e.jsx("button",{onClick:o,className:"absolute top-20 left-4 z-50 bg-white px-3 py-2 rounded shadow text-sm",children:r==="osm"?"ðŸŒ Ù…Ø§Ù‡ÙˆØ§Ø±Ù‡":"ðŸ—ºï¸ Ù†Ù‚Ø´Ù‡"})]})},re=({map:t,onPointSelect:s,selectedPoint:n})=>(l.useEffect(()=>{const r=a=>{s({lat:a.lngLat.lat,lng:a.lngLat.lng})};return t.on("click",r),()=>{t.off("click",r)}},[t,s]),l.useEffect(()=>{if(!n)return;const r="selected-point";t.getLayer(r)&&t.removeLayer(r),t.getSource(r)&&t.removeSource(r),t.addSource(r,{type:"geojson",data:{type:"Feature",geometry:{type:"Point",coordinates:[n.lng,n.lat]},properties:{}}}),t.addLayer({id:r,type:"circle",source:r,paint:{"circle-radius":8,"circle-color":"#8B5A2B","circle-stroke-width":2,"circle-stroke-color":"#FFF"}})},[t,n]),null),ne=({map:t,center:s,radius:n})=>(l.useEffect(()=>{const r="radius-circle";return t.getLayer(r)&&t.removeLayer(r),t.getSource(r)&&t.removeSource(r),t.addSource(r,{type:"geojson",data:{type:"Feature",geometry:{type:"Point",coordinates:[s.lng,s.lat]},properties:{}}}),t.addLayer({id:r,type:"circle",source:r,paint:{"circle-radius":n/.075,"circle-color":"rgba(139, 90, 43, 0.2)","circle-stroke-width":2,"circle-stroke-color":"#8B5A2B"}}),()=>{t.getLayer(r)&&t.removeLayer(r),t.getSource(r)&&t.removeSource(r)}},[t,s,n]),null),ae=({map:t,report:s})=>(l.useEffect(()=>{if(s&&(["structures","cavities","metals"].forEach(n=>{t.getLayer(n)&&t.removeLayer(n),t.getSource(n)&&t.removeSource(n)}),s.analysis.subsurface_structures.features.length>0)){const n=s.analysis.subsurface_structures.features.map(r=>({type:"Feature",geometry:{type:"Polygon",coordinates:[[[r.bounding_box[0],r.bounding_box[1]],[r.bounding_box[2],r.bounding_box[1]],[r.bounding_box[2],r.bounding_box[3]],[r.bounding_box[0],r.bounding_box[3]],[r.bounding_box[0],r.bounding_box[1]]]]},properties:{type:r.type,confidence:r.confidence}}));t.addSource("structures",{type:"geojson",data:{type:"FeatureCollection",features:n}}),t.addLayer({id:"structures",type:"fill",source:"structures",paint:{"fill-color":"#8B5A2B","fill-opacity":.3,"fill-outline-color":"#000"}})}},[t,s]),null),oe={},z=t=>{let s;const n=new Set,r=(c,x)=>{const f=typeof c=="function"?c(s):c;if(!Object.is(f,s)){const u=s;s=x??(typeof f!="object"||f===null)?f:Object.assign({},s,f),n.forEach(p=>p(s,u))}},a=()=>s,b={setState:r,getState:a,getInitialState:()=>m,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{(oe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},m=s=t(r,a,b);return b},ie=t=>t?z(t):z;var T={exports:{}},V={},B={exports:{}},U={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j=l;function le(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var ce=typeof Object.is=="function"?Object.is:le,de=j.useState,ue=j.useEffect,me=j.useLayoutEffect,xe=j.useDebugValue;function fe(t,s){var n=s(),r=de({inst:{value:n,getSnapshot:s}}),a=r[0].inst,o=r[1];return me(function(){a.value=n,a.getSnapshot=s,L(a)&&o({inst:a})},[t,n,s]),ue(function(){return L(a)&&o({inst:a}),t(function(){L(a)&&o({inst:a})})},[t]),xe(n),n}function L(t){var s=t.getSnapshot;t=t.value;try{var n=s();return!ce(t,n)}catch{return!0}}function he(t,s){return s()}var be=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?he:fe;U.useSyncExternalStore=j.useSyncExternalStore!==void 0?j.useSyncExternalStore:be;B.exports=U;var pe=B.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w=l,ge=pe;function ye(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var ve=typeof Object.is=="function"?Object.is:ye,je=ge.useSyncExternalStore,Ne=w.useRef,Se=w.useEffect,we=w.useMemo,Ee=w.useDebugValue;V.useSyncExternalStoreWithSelector=function(t,s,n,r,a){var o=Ne(null);if(o.current===null){var i={hasValue:!1,value:null};o.current=i}else i=o.current;o=we(function(){function b(u){if(!m){if(m=!0,c=u,u=r(u),a!==void 0&&i.hasValue){var p=i.value;if(a(p,u))return x=p}return x=u}if(p=x,ve(c,u))return p;var h=r(u);return a!==void 0&&a(p,h)?(c=u,p):(c=u,x=h)}var m=!1,c,x,f=n===void 0?null:n;return[function(){return b(s())},f===null?void 0:function(){return b(f())}]},[s,n,r,a]);var d=je(t,o[0],o[1]);return Se(function(){i.hasValue=!0,i.value=d},[d]),Ee(d),d};T.exports=V;var Le=T.exports;const _e=Q(Le),W={},{useDebugValue:Re}=F,{useSyncExternalStoreWithSelector:Ae}=_e;let D=!1;const Ce=t=>t;function Ie(t,s=Ce,n){(W?"production":void 0)!=="production"&&n&&!D&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),D=!0);const r=Ae(t.subscribe,t.getState,t.getServerState||t.getInitialState,s,n);return Re(r),r}const O=t=>{(W?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const s=typeof t=="function"?ie(t):t,n=(r,a)=>Ie(s,r,a);return Object.assign(n,s),n},Pe=t=>t?O(t):O,ze=Pe(t=>({selectedPoint:null,setSelectedPoint:s=>t({selectedPoint:s}),radius:50,setRadius:s=>t({radius:s}),mapLayer:"osm",setMapLayer:s=>t({mapLayer:s})})),De="/api";class Oe{async request(s,n){const r=await fetch(`${De}${s}`,{...n,headers:{"Content-Type":"application/json",...n?.headers}}),a=await r.json();if(!r.ok)throw r.status===429&&a.usage?{status:429,message:a.error||"Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø±ÙˆØ²Ø§Ù†Ù‡",usage:a.usage,resetDate:a.resetDate}:new Error(a.error||"Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±");return a}async activate(s,n){return this.request("/activate",{method:"POST",body:JSON.stringify({systemId:s,activationCode:n})})}async verifySession(s){return this.request("/verify-session",{method:"POST",body:JSON.stringify({systemId:s})})}async analyze(s,n){return this.request("/analyze",{method:"POST",body:JSON.stringify({systemId:s,coordinates:n})})}async getUsageStats(s){return this.request(`/usage-stats?systemId=${encodeURIComponent(s)}`)}}const R=new Oe,k="archaeo_system_id",M=()=>{const t=[navigator.language||"en",screen.width,screen.height,screen.colorDepth,navigator.hardwareConcurrency||2,navigator.platform||"unknown",new Date().getTimezoneOffset()];try{const a=document.createElement("canvas").getContext("webgl");if(a){const o=a.getParameter(a.RENDERER);t.push(o)}}catch{}const s=t.join("|");let n="";for(let r=0;r<s.length;r++)n+=s.charCodeAt(r).toString(16);return`ME-${n.slice(0,9).toUpperCase()}`},A=()=>{try{let t=localStorage.getItem(k);return t||(t=M(),localStorage.setItem(k,t)),t}catch(t){return console.warn("Error accessing localStorage:",t),M()}},ke=()=>{const[t,s]=l.useState({status:"loading"}),[n,r]=l.useState(!0),a=$(),o=async()=>{try{const i=A();if(!navigator.onLine){s({status:"offline"}),r(!1);return}const d=await R.verifySession(i);d.status==="active"?(s({status:"active",daysLeft:d.daysLeft,expiresAt:d.expiresAt}),(window.location.pathname==="/activate"||window.location.pathname==="/expired")&&a("/dashboard")):d.status==="expired"?(s({status:"expired"}),a("/expired")):(s({status:"not_activated"}),a("/activate"))}catch(i){console.error("License check failed:",i),s({status:"offline"})}finally{r(!1)}};return l.useEffect(()=>{o();const i=setInterval(o,60*60*1e3),d=()=>o();return window.addEventListener("online",d),()=>{clearInterval(i),window.removeEventListener("online",d)}},[a]),{...t,checking:n,refresh:o}},Me=()=>{const[t,s]=l.useState(null),[n,r]=l.useState(!0),[a,o]=l.useState(null),i=l.useCallback(async()=>{try{r(!0);const m=A(),c=await R.getUsageStats(m);s(c),o(null)}catch(m){o("Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø¢Ù…Ø§Ø± Ù…ØµØ±Ù"),console.error(m)}finally{r(!1)}},[]);l.useEffect(()=>{i();const m=setInterval(i,6e4);return()=>clearInterval(m)},[i]);const d=t?t.remaining>0:!1,b=l.useCallback(()=>{if(!t?.resetDate)return null;const m=new Date(t.resetDate),c=new Date,x=m.getTime()-c.getTime();if(x<=0)return null;const f=Math.floor(x/(1e3*60*60)),u=Math.floor(x%(1e3*60*60)/(1e3*60));return{hours:f,minutes:u}},[t?.resetDate]);return{usage:t,loading:n,error:a,canAnalyze:d,getResetTime:b,refresh:i}},Fe=({report:t})=>{const{analysis:s,archaeological_interpretation:n}=t;return e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-bold text-amber-900 mb-3",children:"ðŸ“Š Ú¯Ø²Ø§Ø±Ø´ Ø¹Ù„Ù…ÛŒ"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"Ø³Ø§Ø²Ù‡â€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ±Ø³Ø·Ø­ÛŒ:"})," Ø§Ø­ØªÙ…Ø§Ù„ ",Math.round(s.subsurface_structures.probability*100),"% ØŒ ØªØ¹Ø¯Ø§Ø¯ ",s.subsurface_structures.count]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"Ø­ÙØ±Ù‡â€ŒÙ‡Ø§:"})," Ø§Ø­ØªÙ…Ø§Ù„ ",Math.round(s.cavities.probability*100),"% ØŒ Ø¢Ù†ÙˆÙ…Ø§Ù„ÛŒ Ø¯Ù…Ø§ÛŒÛŒ ",s.cavities.thermal_anomaly.toFixed(1),"Â°C"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"ÙÙ„Ø²Ø§Øª:"})," Ø§Ø­ØªÙ…Ø§Ù„ ",Math.round(s.metals.probability*100),"% ØŒ Ø´Ø§Ø®Øµ Ø¢Ù‡Ù† ",s.metals.iron_oxide_index.toFixed(2)]}),e.jsxs("div",{className:"border-t pt-2 mt-2",children:[e.jsx("p",{className:"font-bold",children:"ØªÙØ³ÛŒØ±:"}),e.jsx("p",{children:n.summary_fa}),e.jsxs("p",{className:"text-xs text-stone-500",children:["Ø³Ø·Ø­ Ø§Ø·Ù…ÛŒÙ†Ø§Ù†: ",n.confidence_level]})]})]})]})};function $e(){const t=$(),[s,n]=l.useState(!1),[r,a]=l.useState(null),[o,i]=l.useState(null),[d,b]=l.useState(!1),[m,c]=l.useState(null),[x,f]=l.useState(""),[u,p]=l.useState(""),{selectedPoint:h,setSelectedPoint:C,radius:q}=ze(),{usage:v,loading:G,canAnalyze:E,refresh:J}=Me(),{status:S}=ke();l.useEffect(()=>{S==="not_activated"?t("/activate"):S==="expired"&&t("/expired")},[S,t]);const K=async()=>{if(!h){c("Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ ÛŒÚ© Ù†Ù‚Ø·Ù‡ Ø±ÙˆÛŒ Ù†Ù‚Ø´Ù‡ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯");return}if(!E){c("Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø±ÙˆØ²Ø§Ù†Ù‡ Ø´Ù…Ø§ Ø¨Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø±Ø³ÛŒØ¯Ù‡ Ø§Ø³Øª");return}b(!0),c(null);try{const g=A(),y=await R.analyze(g,h);i(y.result),await J()}catch(g){c(g.message||"Ø®Ø·Ø§ Ø¯Ø± Ø§Ù†Ø¬Ø§Ù… ØªØ­Ù„ÛŒÙ„")}finally{b(!1)}},Y=g=>{g.preventDefault();const y=parseFloat(x),N=parseFloat(u);if(isNaN(y)||isNaN(N)||y<-90||y>90||N<-180||N>180){alert("Ù…Ø®ØªØµØ§Øª Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª");return}C({lat:y,lng:N}),r&&r.flyTo({center:[N,y],zoom:16})};return e.jsxs("div",{className:"h-screen flex flex-col",children:[e.jsxs("header",{className:"bg-white shadow-sm px-6 py-3 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸº"}),e.jsx("h1",{className:"text-xl font-bold text-amber-900",children:"ArchaeoVision Pro"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-sm text-stone-600",children:S==="active"?"âœ… ÙØ¹Ø§Ù„":"âš ï¸ ØºÛŒØ±ÙØ¹Ø§Ù„"}),e.jsxs("button",{onClick:()=>n(!s),className:"flex items-center gap-2 bg-amber-100 text-amber-800 px-4 py-2 rounded-lg text-sm hover:bg-amber-200 transition",children:[e.jsx("span",{children:"â„¹ï¸"})," ",e.jsx("span",{children:"Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ø§"})]})]})]}),e.jsxs("main",{className:"flex-1 relative",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx(se,{onLoad:a}),r&&e.jsxs(e.Fragment,{children:[e.jsx(re,{map:r,onPointSelect:C,selectedPoint:h}),h&&e.jsx(ne,{map:r,center:h,radius:q}),o&&e.jsx(ae,{map:r,report:o})]})]}),e.jsxs("div",{className:"absolute top-4 left-4 z-40 w-80 space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 border border-amber-200",children:[e.jsx("p",{className:"text-sm font-medium text-amber-900 mb-2",children:"ðŸ“ ÙˆØ±ÙˆØ¯ Ø¯Ø³ØªÛŒ Ù…Ø®ØªØµØ§Øª"}),e.jsxs("form",{onSubmit:Y,className:"space-y-2",children:[e.jsx("input",{type:"text",placeholder:"Ø¹Ø±Ø¶ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ (lat)",value:x,onChange:g=>f(g.target.value),className:"w-full p-2 border rounded text-sm"}),e.jsx("input",{type:"text",placeholder:"Ø·ÙˆÙ„ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ (lng)",value:u,onChange:g=>p(g.target.value),className:"w-full p-2 border rounded text-sm"}),e.jsx("button",{type:"submit",className:"w-full bg-amber-600 text-white py-2 rounded-lg text-sm hover:bg-amber-700",children:"Ø±ÙØªÙ† Ø¨Ù‡ Ù†Ù‚Ø·Ù‡"})]})]}),h&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 border border-amber-200",children:[e.jsx("p",{className:"text-sm font-medium text-amber-900 mb-2",children:"ðŸ“ Ù†Ù‚Ø·Ù‡ Ø§Ù†ØªØ®Ø§Ø¨ÛŒ"}),e.jsxs("p",{className:"text-xs font-mono",children:[h.lat.toFixed(6),"Â°, ",h.lng.toFixed(6),"Â°"]}),e.jsx("button",{onClick:K,disabled:d||!E,className:`w-full mt-3 py-2 rounded-lg text-sm font-medium text-white ${d||!E?"bg-stone-400 cursor-not-allowed":"bg-amber-800 hover:bg-amber-900"}`,children:d?"â³ Ø¯Ø± Ø­Ø§Ù„ ØªØ­Ù„ÛŒÙ„...":"ðŸš€ Ø´Ø±ÙˆØ¹ ØªØ­Ù„ÛŒÙ„"}),m&&e.jsx("p",{className:"text-xs text-red-600 mt-2",children:m})]}),G?e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 border border-amber-100",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-amber-900",children:"ØªØ­Ù„ÛŒÙ„ Ø§Ù…Ø±ÙˆØ²"}),e.jsx("span",{className:"text-xs bg-amber-100 px-2 py-1 rounded",children:"Ø¯Ø± Ø­Ø§Ù„ Ø¯Ø±ÛŒØ§ÙØª..."})]}),e.jsx("div",{className:"w-full bg-stone-200 h-2 rounded-full mt-2",children:e.jsx("div",{className:"h-2 rounded-full bg-amber-600",style:{width:"0%"}})})]}):v&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 border border-amber-100",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-amber-900",children:"ØªØ­Ù„ÛŒÙ„ Ø§Ù…Ø±ÙˆØ²"}),e.jsxs("span",{className:"text-xs bg-amber-100 px-2 py-1 rounded",children:[v.remaining," / ",v.limit," Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡"]})]}),e.jsx("div",{className:"w-full bg-stone-200 h-2 rounded-full mt-2",children:e.jsx("div",{className:"h-2 rounded-full bg-amber-600",style:{width:`${(v.limit-v.remaining)/v.limit*100}%`}})})]})]}),s&&e.jsx("div",{className:"absolute top-4 left-4 z-50 w-96 max-w-full",children:e.jsx(te,{onClose:()=>n(!1)})}),o&&e.jsxs("div",{className:"absolute top-4 right-4 z-40 w-96 bg-white rounded-lg shadow-lg p-4 max-h-[calc(100vh-8rem)] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"font-bold text-amber-900",children:"ðŸ“‹ Ú¯Ø²Ø§Ø±Ø´ ØªØ­Ù„ÛŒÙ„"}),e.jsx("button",{onClick:()=>i(null),className:"text-stone-400 hover:text-stone-600",children:"âœ•"})]}),e.jsx(Fe,{report:o})]})]})]})}function Te(){return e.jsx(X,{children:e.jsx(Z,{children:e.jsx(ee,{path:"/",element:e.jsx($e,{})})})})}_.createRoot(document.getElementById("root")).render(e.jsx(F.StrictMode,{children:e.jsx(Te,{})}));
//# sourceMappingURL=index-8-hOlTcW.js.map
